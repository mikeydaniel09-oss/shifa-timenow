// server.json
import express from "express";

const app = express();
const PORT = process.env.PORT || 3000;

// Route to return current time and date in Chicago timezone
app.get("/timenow", (req, res) => {
  try {
    const now = new Date().toLocaleString("en-US", {
      timeZone: "America/Chicago",
      hour12: false,
    });
    res.json({ current_time: now });
  } catch (error) {
    res.status(500).json({ error: "Failed to get time." });
  }
});

// Root route to show it's working
app.get("/", (req, res) => {
  res.send("✅ Shifa TimeNow service is running.");
});

// Start the server
app.listen(PORT, () => {
  console.log(`Server running on port ${PORT}`);
});


// IMPORTANT for Render: use provided port and bind to all interfaces
const PORT = process.env.PORT || 3000;
app.listen(PORT, "0.0.0.0", () => console.log(`⏰ timenow running on :${PORT}`));
